---
layout: default
title: MQTT API
order: 5
permalink: /docs/api-mqtt/
has_children: true
---


Machbase Neo supports writing and query data via MQTT protocols. 

{: .note }
MQTT `v3.1` and `v3.1.1` is officially surpported and `v5` is experimental state

The examples below shows how to efficiently write data with mqtt client (`mosquitto_pub`)
```sh
mosquitto_pub -h 127.0.0.1 -p 4083 -u user -P pass \
    -t db/append/TAGDATA \
    -f ./mqtt-data.json
```


- `mqtt-data.json`

    ```json
    [
        [ "my-car", 1670380342000000000, 32.1, "{\"speed\":\"32.1kmh\",\"lat\":37.38906,\"lon\":127.12182}" ],
        [ "my-car", 1670380343000000000, 65.4, "{\"speed\":\"65.4kmh\",\"lat\":37.38908,\"lon\":127.12189}" ],
        [ "my-car", 1670380344000000000, 76.5, "{\"speed\":\"76.5kmh\",\"lat\":37.38912,\"lon\":127.12195}" ]
    ]
    ```

{: .important }
> Payload form of above example is array of tuple (array of array in JSON), 
> it appends the table with multiple records received through a mqtt message.
> It is also possible to publish single tuple like below. 
> Machbase accepts both types of payload via mqtt.

- Single tuple data

```json
    [ "my-car", 1670380342000000000, 32.1, "{\"speed\":\"32.1kmh\",\"lat\":37.38906,\"lon\":127.12182}" ]
```

Since MQTT is connection oriented protocol, a client program can continuously send data while it keeps the same mqtt session.
It is the realy benefit of using MQTT instead of HTTP for writing data.