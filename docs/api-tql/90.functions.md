---
layout: default
parent: TQL API
title: Functions
nav_order: 90
permalink: /docs/api-tql/functions
has_children: false
---

# Functions
{: .no_toc}

{: .warning }
> While TQL is in experimental stage, all functions and syntax are subject of changes.

1. TOC
{: toc }

## INPUT functions

*Syntax*: `INPUT( QUERY() | SQL() | FAKE() )`

### QUERY()

*Syntax*: `QUERY( fields..., from(), range() )`

This function actully works equivalent to `SQL()` but it takes query conditions via simplified functions instead of SQL text.
It is helpful to get rid of complicate time range SQL `WHERE` condition.

- `fields` `string` : column names, multiple columns are possible

### from()
{:.no_toc}

*Syntax*: `from( table, tag )`

It provides table name and tag name to `QUERY()` function generating SQL internally. It may equivalent to `... FROM <table> WHERE NAME = <tag> ...`.

### range()
{:.no_toc}

*Syntax*: `range( baseTime, deltaDuration, duration)`

It provides time range condition to `QUERY()` function generating SQL internally.
It may equivalent to `... WHERE ... TIME BETWEEN <basetime+deltaDuration> AND <baseTime+deltaDuration+duration>...`.

- `baseTime` `string|number` 'now' and 'last' is available for string type, Or assign number as unix epoch time in nanosecond
- `deltaDuration` `string|number` duration expression, Or assign number for the unix epoch time in nanoseconds. ex) `'-1d2h30m'`, `'1s100ms'`
- `duration` `string|number` duration expression, Or assign number for the unix epoch time in nanoseconds. Logically only positive period makes sense.


### SQL()

*Syntax*: `SQL( sqltext )`

- `sqltext` `string` : SQL SELECT statement to retrieve source data from database. Use backtick(`) for multi-line sql string.

*Example*

```
INPUT( SQL (`SELECT c1 
             FROM table 
             WHERE name ='temperature'`) )
```

### FAKE()

*Syntax*: `FAKE( oscilator() )`

Genrating "fake" data by given method. For now only `oscilator()` is available.

### oscilator()
{:.no_toc}

*Syntax*: `oscilator( freq() [, freq()...], range() )`

Generating wave data by given frequency and time range. If provide multiple `freq()` arguments, it composites waves.

### freq()
{:.no_toc}

*Syntax*: `freq( frequency, amplitude [, bias, phase])`

It produce sine wave by time `amplitude * SIN( 2*Pi * frequency * time + phase) + bias`.

- `frequence` `number` frequency in Hertz (Hz).
- `amplitude` `number`
- `bias` `number`
- `phase` `number` in radian

### range()
{:.no_toc}

*Syntax*: `range( baseTime, deltaDuration, duration)`

It specifies time range from `basetime+deltaDuration` to `baseTime+deltaDuration+duration`.

- `baseTime` `string|number` 'now' and 'last' is available for string type, Or assign number as unix epoch time in nanosecond
- `deltaDuration` `string|number` duration expression, Or assign number for the unix epoch time in nanoseconds. ex) `'-1d2h30m'`, `'1s100ms'`
- `duration` `string|number` duration expression, Or assign number for the unix epoch time in nanoseconds. Logically only positive period makes sense.

## OUTPUT functions

*Syntax*: `OUTPUT( CSV() | JSON() | CHART_???() )`

### CSV

### JSON

### CHART_LINE

### CHART_BAR

### CHART_SCATTER

### CHART_LINE3D

### CHART_BAR3D

### CHART_SCATTER3D

## MAP functions

### TAKE

### DROP

### PUSHKEY

### POPKEY

### GROUPBYKEY

### FLATTEN

### FILTER

### FFT

## Utility functions

### time()

### round()

### roundTime()

### len()

### element()

